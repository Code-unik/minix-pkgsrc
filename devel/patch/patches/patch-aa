$NetBSD$

--- pch.c.orig	Mon Aug 30 06:20:08 1999
+++ pch.c
@@ -30,6 +30,7 @@
 #undef XTERN
 #define XTERN
 #include <pch.h>
+#include <sys/param.h>
 
 #define INITHUNKMAX 125			/* initial dynamic allocation size */
 
@@ -105,7 +106,8 @@ open_patch_file (char const *filename)
     if (!filename || !*filename || strEQ (filename, "-"))
       {
 	file_offset stdin_pos;
-#if HAVE_SETMODE
+#if defined(HAVE_SETMODE) && !(defined(BSD) && BSD >= 199306) && \
+	!defined(__INTERIX) && !defined(__minix)
 	if (binary_transput)
 	  {
 	    if (isatty (STDIN_FILENO))
