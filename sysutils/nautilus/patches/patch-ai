$NetBSD$

--- libnautilus-private/nautilus-program-choosing.c.orig	Tue Apr 13 20:45:27 2004
+++ libnautilus-private/nautilus-program-choosing.c
@@ -71,6 +71,11 @@ typedef struct {
 
 static GHashTable *choose_application_hash_table, *choose_component_hash_table;
 
+#if defined(__APPLE__)
+#include <crt_externs.h>
+#define environ (*_NSGetEnviron())
+#endif
+
 extern char **environ;
 
 /* Cut and paste from gdkspawn-x11.c */
