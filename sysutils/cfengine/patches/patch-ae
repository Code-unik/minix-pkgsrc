$NetBSD$

--- src/image.c.orig	2002-06-20 17:53:53.000000000 +0000
+++ src/image.c
@@ -206,9 +206,12 @@ if (ip->purge == 'y')
    DeleteItemList(namecache);
    }
  
-DeleteCompressedArray(ip->inode_cache);
-
-ip->inode_cache = NULL;
+	/* Only flush when exiting initial call to RecursiveImage() */
+if (strcmp(from,ip->path) == 0)
+   {
+   DeleteCompressedArray(ip->inode_cache);
+   ip->inode_cache = NULL;
+   }
 
 cfclosedir(dirh);
 }
