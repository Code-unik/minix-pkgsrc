$NetBSD$

--- idea-stub.c.orig	Sun Oct 27 02:21:54 2002
+++ cipher/idea-stub.c	Sun Oct 27 02:22:54 2002
@@ -131,9 +131,9 @@
     }
 
   sym = dlsym (handle, "idea_get_info");
-  if (dlerror ())
+  if ((sym == NULL) && (dlerror ()))
     sym = dlsym (handle, "_idea_get_info");
-  if ((err=dlerror())) 
+  if ((sym == NULL) && (err=dlerror())) 
     {
       log_info ("invalid module `%s': %s\n", name, err);
       goto failure;
