$NetBSD$

--- tools.c.orig	Sat Jan 23 16:10:54 2010
+++ tools.c
@@ -229,7 +229,7 @@ getosrelease(void)
 	if (uname(&un) < 0)
 		return NULL;
 
-	XSTRDUP(ret, un.release);
+	asprintf(&ret, "%s.%s", un.release, un.version);
 
 	for (p = ret; isdigit((int)*p) || *p == '.'; p++);
 	*p = '\0';
